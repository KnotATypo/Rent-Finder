/* Theme variables */
:root {
    /* Dark-only site: dark theme values are the defaults */
    --bg: #0b0b0d;
    --text: #e6e6e6;
    --muted: #9aa0a6;
    --accent: #58a6ff;
    --card-bg: #0f1113;
    --border: #222222;
    --hero-bg: #000000;
    --control-bg: rgba(0, 0, 0, 0.33);
    --control-color: #ffffff;
    --dot-bg: rgba(255, 255, 255, 0.3);

    /* height of the sticky header - used to offset full-bleed content */
    --site-header-height: 48px;
}

body {
    font-family: Arial, sans-serif;
    max-width: 900px;
    margin: 40px auto;
    padding: 0 16px;
    color: var(--text);
    background: var(--bg);
    transition: background-color 200ms ease, color 200ms ease;
}

ul {
    list-style: none;
    padding: 0;
}

li {
    margin: 8px 0;
}

a {
    color: var(--accent);
    text-decoration: none;
}


body .hero {
    display: flex;
    gap: 20px;
    align-items: flex-start;
    flex-direction: column;
}

body .hero img {
    display: block;
    width: 100%;
    max-width: 100%;
    height: auto;
    border: 1px solid var(--border);
}

body .blurb {
    flex: 1;
    margin-top: 12px;
    background: var(--card-bg);
    padding: 0; /* listing page overrides will add padding where needed */
}

/* Listing-page specific: make hero-image fill the viewport on small screens */
body.listing-page .hero-image {
    position: relative;
    left: 50%;
    right: 50%;
    margin-left: -50vw;
    margin-right: -50vw;
    /* fill viewport minus the sticky header so the bottom of the carousel sits at the viewport bottom */
    width: 100vw;
    height: calc(100vh - var(--site-header-height));
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--hero-bg); /* letterbox background when image doesn't fill area */
}

/* Show the whole image (no side cropping) */
body.listing-page .hero-image img {
    max-width: 100vw;
    max-height: calc(100vh - var(--site-header-height));
    width: auto;
    height: auto;
    object-fit: contain; /* show whole image without cropping */
    display: block;
}

/* subtle swipe-up indicator */
body.listing-page .hero-image::after {
    content: '\2191'; /* up arrow */
    position: absolute;
    /* place the arrow above the carousel dots (dots sit at ~40px from the bottom) */
    /* move it further up so it doesn't collide with dots; leave safe-area accounted for */
    bottom: calc(40px + 28px + env(safe-area-inset-bottom, 0px));
    left: 50%;
    transform: translateX(-50%);
    background: rgba(255, 255, 255, 0.08);
    color: #fff;
    width: 28px;
    height: 28px;
    border-radius: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    backdrop-filter: blur(4px);
    z-index: 46; /* sit above the carousel image but below any important controls */
}

@media (min-width: 700px) {
    /* desktop: give the arrow slightly more room above the dots */
    body.listing-page .hero-image::after {
        bottom: calc(40px + 36px + env(safe-area-inset-bottom, 0px));
    }

    body .hero img,
    body .no-image {
        width: 480px;
        max-width: 480px;
    }

    /* On desktop, revert to side-by-side; hero-image becomes normal-sized */
    body.listing-page {
        max-width: 900px;
        margin: 40px auto;
        padding: 0 16px;
        overflow-x: visible;
    }

    body.listing-page .hero-image {
        position: static;
        margin: 0;
        width: 480px;
        height: auto;
        align-items: flex-start;
        background: transparent;
    }

    body.listing-page .hero-image img {
        width: 100%;
        height: auto;
        object-fit: contain;
    }
}

.carousel-slide {
    display: none;
}

.carousel-slide img {
    display: block;
    width: 100%;
    height: auto;
    max-width: none;
}

.carousel-prev, .carousel-next {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: var(--control-bg);
    color: var(--control-color);
    border: none;
    width: 30px;
    height: 30px;
    border-radius: 15px;
}

.carousel-prev {
    left: 12px;
}

.carousel-next {
    right: 12px;
}

.carousel-dots {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    bottom: calc(40px + env(safe-area-inset-bottom, 0px));
    display: flex;
    gap: 8px;
}

.carousel-dots .dot {
    width: 10px;
    height: 10px;
    border-radius: 5px;
    background: var(--dot-bg);
    border: none;
}

.carousel-dots .dot.active {
    background: #fff;
}


/* Footer below the carousel so text isn't overlaid on images */
.carousel-footer {
    /* Position the caption relative to the carousel container so it stays attached (not floating) */
    position: absolute;
    left: calc(12px + env(safe-area-inset-left, 0px)); /* small inset from left */
    bottom: calc(40px + 16px + env(safe-area-inset-bottom, 0px)); /* sit above the dots; respect safe area */
    z-index: 45; /* above dots/controls but within carousel stacking context */
    display: flex;
    flex-direction: column; /* stack price above the icon groups */
    align-items: flex-start; /* pin content to left of the carousel */
    gap: 6px;
    pointer-events: none; /* keep underlying controls clickable */
}

.carousel-footer__price {
    background: rgba(0, 0, 0, 0.75);
    color: #fff;
    padding: 8px 10px;
    border-radius: 10px;
    font-size: 18px; /* slightly larger */
    font-weight: 600;
    line-height: 1;
    pointer-events: auto; /* allow selecting/copying if needed */
}

.carousel-footer__text {
    background: rgba(0, 0, 0, 0.6);
    color: #fff;
    padding: 8px 10px;
    border-radius: 8px;
    font-size: 14px;
    pointer-events: auto; /* allow selecting/copying text if needed */
    text-align: left; /* align groups left when stacked */
}

/* Icon + number spacing inside the carousel footer */
.carousel-footer__text > span {
    display: inline-flex; /* keep groups inline but align items */
    align-items: center;
    gap: 8px; /* space between svg and the number */
    margin-inline-end: 12px; /* space between each group (RTL-safe) */
}

.carousel-footer__text svg {
    width: 18px;
    height: 18px;
    flex-shrink: 0;
}

@media (min-width: 700px) {
    /* On desktop, keep the same relative placement but slightly adjust the dots spacing */
    .carousel-dots {
        bottom: 40px; /* desktop: simpler spacing (carousel not full-bleed) */
    }

    .carousel-footer {
        /* still absolute relative to carousel; keep caption above the dots */
        left: 12px;
        bottom: calc(40px + 16px + env(safe-area-inset-bottom, 0px));
        z-index: 45;
        pointer-events: none;
    }
}

/* Travel-times table improvements: readable, compact, responsive */
.travel-times {
    width: 100%;
    border-collapse: collapse;
    margin-top: 8px;
    font-size: 13px; /* slightly smaller for compactness */
    color: var(--text);
    background: transparent;
}

.travel-times thead th {
    text-align: left;
    padding: 8px 10px;
    font-weight: 700;
    color: var(--muted);
    font-size: 12px;
    letter-spacing: 0.2px;
    border-bottom: 1px solid var(--border);
}

.travel-times tbody td {
    padding: 8px 10px;
    vertical-align: middle;
    border-bottom: 1px dashed var(--border);
}

.travel-times__badges {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    align-items: center;
}

/* Compact mode badge */
.travel-times .mode-badge {
    display: inline-block;
    padding: 4px 8px;
    border-radius: 999px;
    font-size: 12px;
    font-weight: 600;
    color: var(--accent);
    background: rgba(5, 85, 150, 0.06);
    border: 1px solid rgba(5, 85, 150, 0.08);
    text-transform: uppercase;
    letter-spacing: 0.4px;
}

/* Per-mode color tweaks (dark-only site) */
.travel-times .mode-badge--pt {
    color: #0b5fff; /* blue */
    background: rgba(88, 166, 255, 0.06);
    border-color: rgba(88, 166, 255, 0.12);
}

.travel-times .mode-badge--bike {
    color: #0aa65a; /* green */
    background: rgba(46, 204, 113, 0.04);
    border-color: rgba(46, 204, 113, 0.08);
}

.travel-times .mode-badge--car {
    color: #d97a00; /* orange */
    background: rgba(255, 165, 64, 0.04);
    border-color: rgba(255, 165, 64, 0.08);
}

/* Slightly closer zebra striping for compact rows (dark background) */
.travel-times tbody tr:nth-child(even) {
    background: rgba(255, 255, 255, 0.01);
}

/* Responsive: collapse into stacked items on very small screens */
@media (max-width: 640px) {
    .travel-times {
        font-size: 14px;
    }

    .travel-times thead {
        display: none;
    }

    .travel-times tbody tr {
        display: block;
        padding: 6px 0;
        border-bottom: 1px solid var(--border);
    }

    .travel-times tbody td {
        display: flex;
        justify-content: space-between;
        padding: 6px 0;
        border: none;
    }

    .travel-times tbody td::before {
        content: attr(data-label);
        color: var(--muted);
        margin-right: 12px;
        font-weight: 700;
    }

    .travel-times__badges {
        justify-content: flex-end;
    }
}

/* Small utility tweak: keep the table visually compact on desktop */
@media (min-width: 700px) {
    .travel-times thead th,
    .travel-times tbody td {
        padding: 10px 12px;
    }
}

/* Site header and global layout */
.site-header {
    /* make header fixed so it doesn't shift during scroll and we can reserve space for it */
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    background: linear-gradient(180deg, rgba(11, 11, 13, 0.95), rgba(11, 11, 13, 0.9));
    border-bottom: 1px solid var(--border);
    z-index: 1000;
    height: var(--site-header-height);
    display: flex;
    align-items: center;
}

/* push the page content down so it isn't hidden under the fixed header */
.site-main {
    max-width: 900px;
    margin: 24px auto;
    padding: var(--site-header-height) 16px 0 16px; /* top padding reserves header space */
}

/* Listing pages: keep full-bleed layout but still reserve header space so hero fits exactly */
body.listing-page {
    max-width: none;
    margin: 0; /* remove the site-wide 40px margin on listing pages */
    padding: 0; /* remove site padding so hero-image can reach the top */
    overflow-x: hidden;
}

body.listing-page .site-main {
    margin: 0;
    padding-top: 0; /* remove main padding — we'll offset the hero itself */
    padding-left: 0;
    padding-right: 0;
}

/* Offset the full-bleed hero so it sits below the fixed header and fills the remaining viewport */
body.listing-page .hero-image {
    margin-top: var(--site-header-height);
}

/* Make sure header's inner layout still aligns with page content width */
.site-header__inner {
    max-width: 900px;
    margin: 0 auto;
    padding: 0 16px;
    display: flex;
    align-items: center;
    /* center the header content; we'll absolutely position the logo and nav
       so the logo can be pinned flush to the left edge while the nav stays
       pinned to the right. (Do not set position here so absolute children
       are positioned relative to the fixed .site-header / viewport.) */
    justify-content: center;
    gap: 16px;
}

.site-logo {
    color: var(--text);
    font-weight: 700;
    font-size: 18px;
    text-decoration: none;
    /* Pin the logo to the left edge of the header (viewport) and vertically center it */
    position: absolute;
    left: 16px;
    top: 50%;
    transform: translateY(-50%);
}

.site-nav {
    /* Keep the navigation pinned to the right edge of the header */
    position: absolute;
    right: 16px;
}

.site-nav ul {
    display: flex;
    gap: 12px;
    margin: 0;
    padding: 0;
    list-style: none;
    align-items: center;
}

.site-nav a {
    color: var(--muted);
    padding: 6px 8px;
    border-radius: 6px;
}

.site-nav a:focus {
    color: var(--text);
    background: rgba(255, 255, 255, 0.02);
}

/* keep the blurb visually separated */
body.listing-page .blurb {
    background: var(--card-bg);
    padding: 16px;
    border-top: 1px solid var(--border);
    box-sizing: border-box; /* ensure padding counts into width */
    flex: 0 1 auto; /* don't stretch to fill flex container */
    /* use min() so the blurb never exceeds the site max-width but keeps 16px gutters on each side */
    width: min(900px, calc(100% - 32px));
    max-width: 900px; /* constrain content to main site width */
    margin: 12px auto 0 auto; /* center the blurb and add a small top gap */
    align-self: center; /* ensure it stays centered inside the full-bleed hero */
}

@media (max-width: 480px) {
    body.listing-page .blurb {
        padding-left: 12px;
        padding-right: 12px;
    }
}

@media (min-width: 1000px) {
    /* on very large screens keep the blurb constrained by max-width */
    body.listing-page .blurb {
        width: auto;
    }
}

/* Buttons: base and modifiers */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 10px 14px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    font-weight: 700;
    color: var(--text);
    background: var(--control-bg);
    transition: background-color 120ms ease, transform 80ms ease;
}

/* Color modifiers for buttons (home/actions) */
.btn--green {
    background: #2eb85c; /* green */
    color: #000; /* use black text for contrast */
}

.btn--green:focus {
    background: #28a745;
    color: #000;
}

.btn--red {
    background: #e74c3c; /* red */
    color: #000; /* use black text for contrast */
}

.btn--red:focus {
    background: #c0392b;
    color: #000;
}

.btn--blue {
    background: var(--accent);
    color: #000; /* black text for contrast */
    border-radius: 8px;
}

.btn--blue:focus {
    background: #2b8fff; /* slightly darker blue on focus */
    color: #000;
}

.btn--purple {
    /* changed from teal to purple to give a distinct color */
    background: #8e44ad; /* purple */
    color: #000; /* black text for contrast */
}

.btn--purple:focus {
    background: #7a2fa0; /* slightly darker purple on focus */
    color: #000;
}

/* Stack home page buttons vertically and center them */
.home-actions {
    display: flex;
    flex-direction: column;
    gap: 12px;
    align-items: center;
    justify-content: center;
    margin: 0; /* card handles spacing */
    padding: 16px 12px; /* provide some internal breathing room inside card */
}

/* Card that wraps the home actions */
.home-card {
    max-width: 400px;
    margin: 24px auto;
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid rgba(255, 255, 255, 0.04);
    border-radius: 12px;
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.45);
    overflow: hidden;
}

/* Add-filter controls: keep select, input and add button inline and cohesive */
.add-filter-controls {
    display: flex;
    gap: 8px;
    align-items: center; /* vertically center controls */
    flex-wrap: nowrap; /* keep controls inline */
}

/* Make the controls clearly visible on the dark background */
.add-filter-controls select,
.add-filter-controls input[type="text"] {
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    /* stronger control background so selects stand out from the card */
    background: rgba(255, 255, 255, 0.07);
    color: var(--text);
    border: 1px solid rgba(255, 255, 255, 0.12);
    padding: 10px 12px;
    border-radius: 10px;
    font-size: 14px;
    line-height: 1;
    height: 44px; /* ensure same height as buttons */
    box-sizing: border-box; /* consistent sizing */
}

/* Ensure the add button lines up with the selects/inputs */
.add-filter-controls .btn {
    height: 44px;
    padding: 10px 14px;
    box-sizing: border-box;
}

/* Custom, larger arrow for better discoverability */
.add-filter-controls select {
    padding-right: 44px; /* room for the arrow */
    /* use a single inline-SVG chevron for a clean, crisp arrow across browsers */
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='14' height='8' viewBox='0 0 14 8'><path d='M1 2.5 L7 6.5 L13 2.5' stroke='%239aa0a6' stroke-width='1.6' stroke-linecap='round' stroke-linejoin='round' fill='none'/></svg>");
    background-position: calc(100% - 16px) 50%;
    background-size: 14px 8px;
    background-repeat: no-repeat;
}

/* Operator should only be as wide as its content */
#filter-operator {
    /* keep the native arrow removed */
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    background-image: none;

    /* shrink to fit the symbol while keeping the same control height */
    width: auto;
    min-width: 32px; /* small sensible minimum so it fits the symbol */
    flex: 0 0 auto; /* don't grow — shrink to fit content */

    /* tight padding so the control only takes as much room as needed */
    padding: 0 8px;
    height: 44px; /* keep same height as other controls */
    box-sizing: border-box;

    /* center the symbol horizontally and vertically */
    display: inline-flex;
    align-items: center;
    justify-content: center;
    text-align: center; /* selected value */
    text-align-last: center; /* Firefox */
    -moz-text-align-last: center;
    white-space: nowrap; /* prevent wrapping of symbol */

    font-size: 16px; /* ensure symbol remains legible */
    line-height: 1;
}

/* ensure the options are centered when the dropdown opens */
#filter-operator option {
    text-align: center;
}

/* Hide the dropdown arrow in IE/Edge for just this select */
#filter-operator::-ms-expand {
    display: none;
}

/* Type select: sized to content but can stay compact */
#filter-type {
    flex: 0 0 auto; /* size to content */
    min-width: 80px;
}

/* Value input should fill remaining space */
#filter-value {
    flex: 1 1 auto; /* grow to take available space */
    min-width: 120px; /* remain usable on small screens */
}

@media (max-width: 420px) {
    .add-filter-controls {
        gap: 6px;
        flex-wrap: wrap; /* allow wrapping on very small screens */
    }

    .add-filter-controls select,
    .add-filter-controls input[type="text"] {
        padding: 8px 10px;
        height: 40px;
        min-height: 40px;
    }

    .add-filter-controls .btn {
        padding: 8px 10px;
        height: 40px;
    }
}

/* Listing actions layout: two equal buttons side-by-side */
.listing-actions {
    display: flex;
    gap: 0; /* no gap so the buttons meet exactly at the middle */
    margin: 12px auto 24px auto;
    width: min(900px, calc(100% - 32px));
    max-width: 900px;
    box-sizing: border-box;
}

.listing-actions form {
    flex: 1 1 50%;
    margin: 0; /* remove default form margins */
}

.listing-actions form .btn {
    width: 100%;
    padding: 14px 12px;
    border-radius: 0; /* square edges so buttons line up seamlessly */
    box-sizing: border-box;
}

/* Make the left button have a left-rounded corner and the right button have right-rounded corner on wider screens */
@media (min-width: 480px) {
    .listing-actions form:first-child .btn {
        border-radius: 8px 0 0 8px;
    }

    .listing-actions form:last-child .btn {
        border-radius: 0 8px 8px 0;
    }
}

/* On very small screens stack them vertically so touch targets are easier */
@media (max-width: 420px) {
    .listing-actions {
        flex-direction: column;
        gap: 8px;
        width: calc(100% - 24px);
    }

    .listing-actions form .btn {
        border-radius: 8px; /* restore rounded corners when stacked */
    }
}

/* Listing/table utility styles: make generic listing tables look like tables */
.listing-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 12px;
    background: var(--card-bg);
    border: 1px solid var(--border);
    border-radius: 8px;
    overflow: hidden; /* keep rounded corners */
    box-sizing: border-box;
}

.listing-table thead th {
    background: rgba(255, 255, 255, 0.03);
    color: var(--muted);
    font-weight: 700;
    padding: 12px 14px;
    text-align: left;
    font-size: 13px;
    border-bottom: 1px solid var(--border);
}

.listing-table tbody td {
    padding: 12px 14px;
    vertical-align: middle;
    border-bottom: 1px solid rgba(255, 255, 255, 0.02);
    color: var(--text);
    font-size: 14px;
}

.listing-table tbody tr:last-child td {
    border-bottom: none; /* tidy last row */
}

.listing-table td:first-child {
    font-weight: 600;
}

.listing-table .actions {
    display: flex;
    gap: 8px;
    justify-content: flex-end;
}

/* Small utility classes */
.muted {
    color: var(--muted);
}

.sr-only {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    padding: 0 !important;
    margin: -1px !important;
    overflow: hidden !important;
    clip: rect(0, 0, 0, 0) !important;
    white-space: nowrap !important; /* added line */
    border: 0 !important;
}

