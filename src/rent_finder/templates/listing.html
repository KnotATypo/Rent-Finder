<!doctype html>
<html class="dark">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ listing.address_id.address }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body class="listing-page">
<div class="hero">
    <div class="hero-image carousel" id="carousel">
        {% if image_urls %}
            {% for src in image_urls %}
                <div class="carousel-slide">
                    <img src="{{ src }}" alt="{{ listing.address_id.address }} image {{ loop.index }}">
                </div>
            {% endfor %}
            <button class="carousel-prev" aria-label="Previous">‹</button>
            <button class="carousel-next" aria-label="Next">›</button>

            <!-- Caption overlaid above the dots and pinned to the left -->
            <div class="carousel-footer" role="contentinfo" aria-label="Listing image caption">
                <p class="carousel-footer__text">Beds: {{ listing.address_id.beds }}
                    Baths: {{ listing.address_id.baths }} Cars: {{ listing.address_id.cars }} Price:
                    ${{ listing.price }}</p>
            </div>

            <div class="carousel-dots">
                {% for _ in image_urls %}
                    <button class="dot" aria-label="Go to image {{ loop.index }}"></button>
                {% endfor %}
            </div>
        {% else %}
            <div class="no-image">No image</div>
        {% endif %}
    </div>

    <div class="blurb">
        <a href="{{ url_for('index') }}">← Back to listings</a>
        <h1>
            <a href="https://www.google.com/maps/place/{{ listing.address_id.address|replace(' ', '+')|replace('/', '%2F') }}"
               target="_blank" rel="noopener noreferrer">{{ listing.address_id.address }}</a></h1>
        {% if blurb_html %}
            {{ blurb_html | safe }}
        {% else %}
            <p>No blurb available for this listing.</p>
        {% endif %}
    </div>
</div>

<script src="{{ url_for('static', filename='js/carousel.js') }}"></script>
</body>
</html>
